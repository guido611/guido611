

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Compound Charts: Layer, HConcat, VConcat, Repeat, Facet &mdash; sphinx-test 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Saving Altair Charts" href="saving_charts.html" />
    <link rel="prev" title="Top-Level Chart Configuration" href="configuration.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> sphinx-test
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/starting.html">Basic Statistical Visualization</a></li>
</ul>
<p class="caption"><span class="caption-text">Gallery</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Example Gallery</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="data.html">Specifying Data in Altair</a></li>
<li class="toctree-l1"><a class="reference internal" href="encoding.html">Encodings</a></li>
<li class="toctree-l1"><a class="reference internal" href="marks.html">Marks</a></li>
<li class="toctree-l1"><a class="reference internal" href="transform.html">Data Transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactions.html">Bindings, Selections, Conditions: Making Charts Interactive</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Top-Level Chart Configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Compound Charts: Layer, HConcat, VConcat, Repeat, Facet</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#layered-charts">Layered Charts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#order-of-layers">Order of Layers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#horizontal-concatenation">Horizontal Concatenation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vertical-concatenation">Vertical Concatenation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#repeated-charts">Repeated Charts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#faceted-charts">Faceted Charts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="saving_charts.html">Saving Altair Charts</a></li>
<li class="toctree-l1"><a class="reference internal" href="customization.html">Customizing Visualizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="times_and_dates.html">Times and Dates in Altair</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Display Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="renderers.html">Altair Renderers</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals.html">Altair Internals: Understanding the Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="ecosystem.html">Altair Ecosystem</a></li>
</ul>
<p class="caption"><span class="caption-text">Case Studies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../case_studies/exploring-weather.html">Exploring Seattle Weather</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="importing.html">Importing Vega &amp; Vega-Lite Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="display_frontends.html">Displaying Charts in Various Frontends</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_renderers.html">Customizing Renderers</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_transformers.html">Data transformers</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">sphinx-test</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Compound Charts: Layer, HConcat, VConcat, Repeat, Facet</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/user_guide/compound_charts.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="compound-charts-layer-hconcat-vconcat-repeat-facet">
<span id="user-guide-compound"></span><h1>Compound Charts: Layer, HConcat, VConcat, Repeat, Facet<a class="headerlink" href="#compound-charts-layer-hconcat-vconcat-repeat-facet" title="Permalink to this headline">¶</a></h1>
<p>Along with the basic <code class="xref py py-class docutils literal notranslate"><span class="pre">Chart</span></code> object, Altair provides a number of
compound plot types that can be used to create stacked, layered, faceted,
and repeated charts. They are summarized in the following tables:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 33%" />
<col style="width: 20%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>class</p></th>
<th class="head"><p>functional form</p></th>
<th class="head"><p>operator form</p></th>
<th class="head"><p>reference</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">LayerChart</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">alt.layer(chart1,</span> <span class="pre">chart2)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">chart1</span> <span class="pre">+</span> <span class="pre">chart2</span></code></p></td>
<td><p><a class="reference internal" href="#layer-chart"><span class="std std-ref">Layered Charts</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">HConcatChart</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">alt.hconcat(chart1,</span> <span class="pre">chart2)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">chart1</span> <span class="pre">|</span> <span class="pre">chart2</span></code></p></td>
<td><p><a class="reference internal" href="#hconcat-chart"><span class="std std-ref">Horizontal Concatenation</span></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">VConcatChart</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">alt.vconcat(chart1,</span> <span class="pre">chart2)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">chart1</span> <span class="pre">&amp;</span> <span class="pre">chart2</span></code></p></td>
<td><p><a class="reference internal" href="#vconcat-chart"><span class="std std-ref">Vertical Concatenation</span></a></p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 45%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>class</p></th>
<th class="head"><p>method form</p></th>
<th class="head"><p>reference</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">RepeatChart</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">chart.repeat(row,</span> <span class="pre">column)</span></code></p></td>
<td><p><a class="reference internal" href="#repeat-chart"><span class="std std-ref">Repeated Charts</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">FacetChart</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">chart.facet(facet,</span> <span class="pre">row,</span> <span class="pre">column)</span></code></p></td>
<td><p><a class="reference internal" href="#facet-chart"><span class="std std-ref">Faceted Charts</span></a></p></td>
</tr>
</tbody>
</table>
<div class="section" id="layered-charts">
<span id="layer-chart"></span><h2>Layered Charts<a class="headerlink" href="#layered-charts" title="Permalink to this headline">¶</a></h2>
<p>Layered charts allow you to overlay two different charts on the same set of axes.
They can be useful, for example, when you wish to draw multiple marks for the
same data; for example:</p>
<p>Here we have used the <code class="docutils literal notranslate"><span class="pre">+</span></code> operator to create a layered chart; alternatively
we could use the <code class="docutils literal notranslate"><span class="pre">alt.layer</span></code> function, which accepts as its arguments any
number of charts:</p>
<p>The output of both of these patterns is a <code class="xref py py-class docutils literal notranslate"><span class="pre">LayerChart</span></code> object, which
has properties and methods similar to the <code class="xref py py-class docutils literal notranslate"><span class="pre">Chart</span></code> object.</p>
<div class="section" id="order-of-layers">
<h3>Order of Layers<a class="headerlink" href="#order-of-layers" title="Permalink to this headline">¶</a></h3>
<p>In a layered chart, the order of layers is determined from the order in which
they are specified. For example, when creating a chart using <code class="docutils literal notranslate"><span class="pre">layer1</span> <span class="pre">+</span> <span class="pre">layer2</span></code>
or <code class="docutils literal notranslate"><span class="pre">alt.layer(layer1,</span> <span class="pre">layer2)</span></code>, <code class="docutils literal notranslate"><span class="pre">layer1</span></code> will appear below <code class="docutils literal notranslate"><span class="pre">layer2</span></code>,
and <code class="docutils literal notranslate"><span class="pre">layer2</span></code> may obscure the marks of <code class="docutils literal notranslate"><span class="pre">layer1</span></code>.</p>
<p>For example, consider the following chart where we plot points on top of a
heat-map:</p>
<p>If we put the two layers in the opposite order, the points will be drawn first
and will be obscured by the heatmap marks:</p>
<p>If you do not see the expected output when creating a layered chart, make certain
that you are ordering the layers appropriately.</p>
</div>
</div>
<div class="section" id="horizontal-concatenation">
<span id="hconcat-chart"></span><h2>Horizontal Concatenation<a class="headerlink" href="#horizontal-concatenation" title="Permalink to this headline">¶</a></h2>
<p>Displaying two plots side-by-side is most generally accomplished with the
<code class="xref py py-class docutils literal notranslate"><span class="pre">HConcatChart</span></code> object, which can be created using the <code class="xref py py-class docutils literal notranslate"><span class="pre">hconcat</span></code>
function or the <code class="docutils literal notranslate"><span class="pre">|</span></code> operator.</p>
<p>For example, here is a scatter-plot concatenated with a histogram showing the
distribution of its points:</p>
<p>This example uses the <code class="docutils literal notranslate"><span class="pre">|</span></code> operator, but could similarly have been created
with the <code class="xref py py-func docutils literal notranslate"><span class="pre">hconcat()</span></code> function:</p>
<p>The output of both of these is an <code class="xref py py-class docutils literal notranslate"><span class="pre">HConcatChart</span></code> object, which has
many of the same top-level methods and attributes as the <code class="xref py py-class docutils literal notranslate"><span class="pre">Chart</span></code>
object.</p>
<p>Finally, keep in mind that for certain types of horizontally-concatenated
charts, where each panel modifies just one aspect of the visualization,
repeated and faceted charts are more convenient (see <a class="reference internal" href="#repeat-chart"><span class="std std-ref">Repeated Charts</span></a>
and <a class="reference internal" href="#facet-chart"><span class="std std-ref">Faceted Charts</span></a> for more explanation).</p>
</div>
<div class="section" id="vertical-concatenation">
<span id="vconcat-chart"></span><h2>Vertical Concatenation<a class="headerlink" href="#vertical-concatenation" title="Permalink to this headline">¶</a></h2>
<p>Similarly to <a class="reference internal" href="#hconcat-chart"><span class="std std-ref">Horizontal Concatenation</span></a> above, Altair offers vertical concatenation
via the <code class="xref py py-func docutils literal notranslate"><span class="pre">vconcat()</span></code> function or the <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> operator.</p>
<p>For example, here we vertically-concatenate two views of the same data,
with a <code class="docutils literal notranslate"><span class="pre">brush</span></code> selection to add interaction:</p>
<p>Note that we could just as well have used <code class="docutils literal notranslate"><span class="pre">upper</span> <span class="pre">&amp;</span> <span class="pre">lower</span></code> rather than the
more verbose <code class="docutils literal notranslate"><span class="pre">alt.vconcat(upper,</span> <span class="pre">lower)</span></code>.</p>
<p>As with horizontally-concatenated charts, keep in mind that for concatenations
where only one data grouping or encoding is changing in each panel, using
<a class="reference internal" href="#repeat-chart"><span class="std std-ref">Repeated Charts</span></a> or <a class="reference internal" href="#facet-chart"><span class="std std-ref">Faceted Charts</span></a> can be more efficient.</p>
</div>
<div class="section" id="repeated-charts">
<span id="repeat-chart"></span><h2>Repeated Charts<a class="headerlink" href="#repeated-charts" title="Permalink to this headline">¶</a></h2>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">RepeatChart</span></code> object provides a convenient interface for a particular
type of horizontal or vertical concatenation, in which the only difference between
the concatenated panels is modification of <em>one or more encodings</em>.</p>
<p>For example, suppose you would like to create a multi-panel scatter-plot to show
different projections of a multi-dimensional dataset.
Let’s first create sucha chart manually using <code class="docutils literal notranslate"><span class="pre">hconcat</span></code> and <code class="docutils literal notranslate"><span class="pre">vconcat</span></code>, before
showing how <code class="docutils literal notranslate"><span class="pre">repeat</span></code> can be used to build the chart more efficiently:</p>
<p>In this example, we explicitly loop over different x and y encodings
to create a 2 x 2 grid of charts showing different views of the data.
The code is straightforward, if a bit verbose.</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">RepeatChart</span></code> pattern, accessible via the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Chart.repeat()</span></code>
method, makes this type of chart a bit easier to produce:</p>
<p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">Chart.repeat()</span></code> method is the key here: it lets you specify a set of
encodings for the row and/or column which can be referred to in the chart’s
encoding specification using <code class="docutils literal notranslate"><span class="pre">alt.repeat('row')</span></code> or <code class="docutils literal notranslate"><span class="pre">alt.repeat('column')</span></code>.</p>
<p>Currently <code class="docutils literal notranslate"><span class="pre">repeat</span></code> can only be specified for rows and column (not, e.g., for
layers) and the target can only be encodings (not, e.g., data transforms)
but there is discussion within the Vega-Lite community about making this pattern
more general in the future.</p>
</div>
<div class="section" id="faceted-charts">
<span id="facet-chart"></span><h2>Faceted Charts<a class="headerlink" href="#faceted-charts" title="Permalink to this headline">¶</a></h2>
<p>Like repeated charts, Faceted charts provide a more convenient API for creating
multiple views of a dataset for a specific type of chart: one where each panel
contains a different subset of data.</p>
<p>We could do this manually using a filter transform along with a horizontal
concatenation:</p>
<p>As with the manual approach to <a class="reference internal" href="#repeat-chart"><span class="std std-ref">Repeated Charts</span></a>, this is straightforward,
if a bit verbose.</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">alt.facet</span></code> it becomes a bit cleaner:</p>
<p>For simple charts like this, there is also a <code class="docutils literal notranslate"><span class="pre">column</span></code> encoding channel that
can give the same results:</p>
<p>The advantage of using <code class="docutils literal notranslate"><span class="pre">alt.facet</span></code> is that it can create faceted views of
more complicated compound charts. For example, here is a faceted view of a
layered chart with a hover selection:</p>
<p>Though each of the above examples have faceted the data across columns,
faceting across rows (or across rows <em>and</em> columns) is supported as
well.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="saving_charts.html" class="btn btn-neutral float-right" title="Saving Altair Charts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="configuration.html" class="btn btn-neutral float-left" title="Top-Level Chart Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Guido Drechsel

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>