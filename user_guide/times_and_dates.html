

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Times and Dates in Altair &mdash; sphinx-test 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Frequently Asked Questions" href="faq.html" />
    <link rel="prev" title="Customizing Visualizations" href="customization.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> sphinx-test
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/starting.html">Basic Statistical Visualization</a></li>
</ul>
<p class="caption"><span class="caption-text">Gallery</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Example Gallery</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="data.html">Specifying Data in Altair</a></li>
<li class="toctree-l1"><a class="reference internal" href="encoding.html">Encodings</a></li>
<li class="toctree-l1"><a class="reference internal" href="marks.html">Marks</a></li>
<li class="toctree-l1"><a class="reference internal" href="transform.html">Data Transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactions.html">Bindings, Selections, Conditions: Making Charts Interactive</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Top-Level Chart Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="compound_charts.html">Compound Charts: Layer, HConcat, VConcat, Repeat, Facet</a></li>
<li class="toctree-l1"><a class="reference internal" href="saving_charts.html">Saving Altair Charts</a></li>
<li class="toctree-l1"><a class="reference internal" href="customization.html">Customizing Visualizations</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Times and Dates in Altair</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#note-on-browser-compliance">Note on Browser Compliance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#altair-and-pandas-datetimes">Altair and Pandas Datetimes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#specifying-time-zones">Specifying Time Zones</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-utc-time">Using UTC Time</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Display Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="renderers.html">Altair Renderers</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals.html">Altair Internals: Understanding the Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="ecosystem.html">Altair Ecosystem</a></li>
</ul>
<p class="caption"><span class="caption-text">Case Studies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../case_studies/exploring-weather.html">Exploring Seattle Weather</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="importing.html">Importing Vega &amp; Vega-Lite Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="display_frontends.html">Displaying Charts in Various Frontends</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_renderers.html">Customizing Renderers</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_transformers.html">Data transformers</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">sphinx-test</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Times and Dates in Altair</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/user_guide/times_and_dates.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="times-and-dates-in-altair">
<span id="user-guide-time"></span><h1>Times and Dates in Altair<a class="headerlink" href="#times-and-dates-in-altair" title="Permalink to this headline">¶</a></h1>
<p>Working with dates, times, and timezones is often one of the more challenging
aspects of data analysis. In Altair, the difficulties are compounded by the
fact that users are writing Python code, which outputs JSON-serialized
timestamps, which are interpreted by Javascript, and then rendered by your
browser. At each of these steps, there are things that can go wrong, but
Altair and Vega-Lite do their best to ensure that dates are interpreted and
visualized in a consistent way.</p>
<div class="section" id="note-on-browser-compliance">
<span id="note-browser-compliance"></span><h2>Note on Browser Compliance<a class="headerlink" href="#note-on-browser-compliance" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Warning about non-ES6 Browsers</p>
<p>The discussion below applies to modern browsers which support <a class="reference external" href="http://www.ecma-international.org/ecma-262/6.0/">ECMAScript 6</a>,
in which time strings like <code class="docutils literal notranslate"><span class="pre">&quot;2018-01-01T12:00:00&quot;</span></code> without a trailing <code class="docutils literal notranslate"><span class="pre">&quot;Z&quot;</span></code>
are treated as local time rather than <a class="reference external" href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time (UTC)</a>.
For example, recent versions of Chrome and Firefox are ES6-compliant,
while Safari 11 is not.
If you are using a non-ES6 browser, this means that times displayed in Altair
charts may be rendered with a timezone offset, unless you explicitly use
UTC time (see <a class="reference internal" href="#explicit-utc-time"><span class="std std-ref">Using UTC Time</span></a>).</p>
</div>
<p>The following chart will help you determine if your browser parses dates in the
way that Altair expects:</p>
<p>If the above output contains a red “not OK”:</p>
<p>it means that your browser’s date parsing is not ES6-compliant.
If it contains a green “OK”:</p>
<p>then it means that your browser parses dates as Altair expects, either because
it is ES6-compliant or because your computer locale happens to nbe set to
the UTC+0 (GMT) timezone.</p>
</div>
<div class="section" id="altair-and-pandas-datetimes">
<h2>Altair and Pandas Datetimes<a class="headerlink" href="#altair-and-pandas-datetimes" title="Permalink to this headline">¶</a></h2>
<p>Altair is designed to work best with <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/timeseries.html">Pandas timeseries</a>. A standard
timezone-agnostic date/time column in a Pandas dataframe will be both
interpreted and displayed as local user time. For example, here is a dataset
containing hourly temperatures measured in Seattle:</p>
<p>We can see from the <code class="docutils literal notranslate"><span class="pre">dtypes</span></code> attribute that the times are encoded as a standard
64-bit datetime, without any specified timezone:</p>
<p>We can use Altair to visualize this datetime data; for clarity in this
example, we’ll limit ourselves to the first two weeks of data:</p>
<p>(notice that for date/time values we use the <code class="docutils literal notranslate"><span class="pre">T</span></code> to indicate a temporal
encoding: while this is optional for pandas datetime input, it is good practice
to specify a type explicitly; see <a class="reference internal" href="encoding.html#encoding-data-types"><span class="std std-ref">Encoding Data Types</span></a> for more discussion).</p>
<p>For date-time inputs like these, it can sometimes be useful to extract particular
time units (e.g. hours of the day, dates of the month, etc.).
In Altair, this can be done with a time unit transform, discussed in detail in
<a class="reference internal" href="transform.html#user-guide-timeunit-transform"><span class="std std-ref">TimeUnit Transform</span></a>.
For example, we might decide we want a heatmap with hour of the day on the
x-axis, and day of the month on the y-axis:</p>
<p>Unless you are using a non-ES6 browser (See <a class="reference internal" href="#note-browser-compliance"><span class="std std-ref">Note on Browser Compliance</span></a>),
you will notice that the chart created by this code reflects hours starting
at 00:00:00 on January 1st, just as in the data we input.
This is because both the input timestamps and the plot outputs are using
local time.</p>
</div>
<div class="section" id="specifying-time-zones">
<h2>Specifying Time Zones<a class="headerlink" href="#specifying-time-zones" title="Permalink to this headline">¶</a></h2>
<p>If you are viewing the above visualizations in a supported browser (see
<a class="reference internal" href="#note-browser-compliance"><span class="std std-ref">Note on Browser Compliance</span></a> above), the times are both serialized and
rendered in local time, so that the <code class="docutils literal notranslate"><span class="pre">January</span> <span class="pre">1st</span> <span class="pre">00:00:00</span></code> row renders in
the chart as <code class="docutils literal notranslate"><span class="pre">00:00</span></code> on <code class="docutils literal notranslate"><span class="pre">January</span> <span class="pre">1st</span></code>.</p>
<p>In Altair, simple dates without an explicit timezone are treated as local time,
and in Vega-Lite, unless otherwise specified, times are rendered in the local
time of the browser that does the rendering.</p>
<p>If you would like your dates to instead be time-zone aware, you can set the
timezone explicitly in the input dataframe. Since Seattle is in the
<code class="docutils literal notranslate"><span class="pre">US/Pacific</span></code> timezone, we can localize the timestamps in Pandas as follows:</p>
<p>Notice that the timezone is now part of the pandas datatype.
If we repeat the above chart with this timezone-aware data, the result will
render <strong>according to the timezone of the browser rendering it</strong>:</p>
<p>If you are viewing this chart on a computer whose time is set to the west coast
of the US, it should appear identical to the first version. If you are rendering
the chart in any other timezone, it will render using a timezone correction
computed from the location set in your system.</p>
</div>
<div class="section" id="using-utc-time">
<span id="explicit-utc-time"></span><h2>Using UTC Time<a class="headerlink" href="#using-utc-time" title="Permalink to this headline">¶</a></h2>
<p>This user-local rendering can sometimes be confusing, because it leads to the
same output being visualized differently by different users.
If you want timezone-aware data to appear the same to every user regardless of
location, the best approach is to adopt a standard timezone in which to render
the data. One commonly-used standard is <a class="reference external" href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time (UTC)</a>.
In Altair, any of the <code class="docutils literal notranslate"><span class="pre">timeUnit</span></code> binnings can be prefixed with <code class="docutils literal notranslate"><span class="pre">utc</span></code> in
order to extract UTC time units.</p>
<p>Here is the above chart visualized in UTC time, which will render the same way
regardless of the system location:</p>
<p>To make your charts as portable as possible (even in non-ES6 browsers which parse
timezone-agnostic times as UTC), you can explicitly work
in UTC time, both on the Pandas side and on the Vega-Lite side:</p>
<p>This is somewhat less convenient than the default behavior for timezone-agnostic
dates, in which both Pandas and Vega-Lite assume times are local
(except in non-ES6 browsers; see <a class="reference internal" href="#note-browser-compliance"><span class="std std-ref">Note on Browser Compliance</span></a>),
but it gets around browser incompatibilities by explicitly working in UTC, which
gives similar results even in older browsers.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="faq.html" class="btn btn-neutral float-right" title="Frequently Asked Questions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="customization.html" class="btn btn-neutral float-left" title="Customizing Visualizations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Guido Drechsel

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>